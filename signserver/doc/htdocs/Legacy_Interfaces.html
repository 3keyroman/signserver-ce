<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-10-09T09:35:58.964+0000">
        <meta name="exp-page-id" content="370999669">
        <meta name="exp-page-title" content="Legacy Interfaces">
        <meta name="exp-page-version" content="1">
        <meta name="exp-page-scroll-page-id" content="45f7fb90891d6359bb6fa84faf0b3e2a">
        <meta name="exp-page-created" content="2017-12-06T10:16:36.000+0000">
        <meta name="exp-page-last-modified" content="2017-12-06T10:19:12.000+0000">
        <meta name="exp-page-labels" content="">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="SSDOCS">
        <meta name="exp-space-title" content="SignServer Documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="371111034">
        <meta name="exp-document-title" content="SignServer Documentation">
        <meta name="exp-version-status" content="in-progress">
        <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
        <meta name="exp-version-name" content="Working version">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>Legacy Interfaces</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="LegacyInterfaces-top" data-pageid="370999669" data-confluence-editor-version="v1" data-confluence-deployment-type="CLOUD">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="SignServer_Documentation.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/attachments/e415105eb31a/ssdocs)" alt="SignServer Documentation" title="SignServer Documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-5dd351bfc6baf201f82f17226db8452c07006e5be6002abd357bf4d4eb7bed24">
                    <a href="SignServer_Documentation.html">
                        SignServer Documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=370999669" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="SignServer_Documentation.html" rel="prev" target="_self">SignServer Documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Integration.html" rel="prev" target="_self">SignServer Integration</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        Legacy Interfaces
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-025e5be67f99c2eb13e4f24d06633444145dd16d4291634e710ffb6ceef0f445">
                            Legacy Interfaces
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <h2 id="LegacyInterfaces-TheoldWebServicesinterface" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">The old Web Services interface</h2><p>The SignServerWS is the old web services interface now replaced by <span class="confluence-link">SignServer </span><a href="Client_WS_Interface.html" data-linked-resource-id="370999568" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999568" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999568/Client+WS+Interface" data-scroll-link-target-source-id="370999568"><span class="confluence-link">ClientWS</span></a>. It was new to version 3.0 and at the time replaced the RMI-SSL interface from version 1.0 and 2.0 for two reasons, the RMI-SSL were based on a commercial library and it only worked for Java clients.</p><p>The SignServerWS WSDL file is located at the URL http://&lt;hostname&gt;:8080/signserver/signserverws/signserverws?wsdl</p><p>The interface has two calls, the main one is 'process' which takes a collection of process request to a processable worker and returns a collection of process responses, the second one is getStatus that performs a health check of the node and returns an OK message if the node is healthy.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Although the SignServerWS interface uses web services, the actual process data is base64 encoded byte arrays in a special binary format. You will have to lookup the Java source code for the exact format of the request and response data. Alternatively, use the simpler <a href="Client_HTTP_Interface.html" data-linked-resource-id="370999564" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="370999564" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999564/Client+HTTP+Interface" data-scroll-link-target-source-id="370999564">HTTP interface</a>&nbsp;or the newer&nbsp;<a href="Client_WS_Interface.html" data-linked-resource-id="370999568" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999568" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999568/Client+WS+Interface" data-scroll-link-target-source-id="370999568">Client WS interface</a>.</p></div></div><p>The getStatus call can be used to implement high-availability towards the client. The Java client API described in the next section have built in support for different high availability policies.</p><p>It is possible to turn off the WebService interface by disabling it in the build configuration.</p><p>This interface is only supported using HTTPS. The reason is that JBoss 4 does not rewrite the protocol part of the WSDL URL so we had to hard code it for it to work with HTTPS. For details about this see&nbsp;<a class="external-link scroll-external-link" href="https://jira.primekey.se/browse/DSS-327" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="https://jira.primekey.se/browse/DSS-327" data-scroll-link-local="false">DSS-327</a>.</p><p>Since SignServer &gt;=3.2.1 it is possible to supply extra request data called RequestMetadata containing key/value pairs that can be used by the signers. For instance the PDFSigner uses this feature to let the client supply a PDF password.</p><h2 id="LegacyInterfaces-JavaClientAPI" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Java Client API</h2><p>Built along with the WebService is a Java API that can be used by clients. It's available in the file lib/SignServer-Client-SignServerWS.jar (the old SignServerWS interface) and lib/SignServer-Client-ClientWS.jar (the ClientWS interface).</p><h3 id="LegacyInterfaces-SigningAndValidationAPI" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">SigningAndValidation API</h3><p>The SigningAndValidation API is a wrapper around the previous mentioned API in order to have a simplified interface that also is the same regardless if WebService or EJB Remote calls are used.</p><p>To use the API include the file lib/SignServer-Client-SigningAndValidationAPI.jar.</p><h3 id="LegacyInterfaces-SampleCode" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">Sample Code</h3><p>Signing and validating an XML document:</p><div class="scroll-code scroll-highlighted-code-block" data-language="java" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="keyword">try</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">    System.setProperty(</code><code class="string">"javax.net.ssl.trustStore"</code><code class="plain">, </code><code class="string">"p12/truststore.jks"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    System.setProperty(</code><code class="string">"javax.net.ssl.trustStorePassword"</code><code class="plain">, </code><code class="string">"changeit"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">  </code></div>
<div class="line"><code class="plain">    ISigningAndValidation signserver = </code><code class="keyword">new</code><code class="plain"> SigningAndValidationWS(</code><code class="string">"localhost"</code><code class="plain">, </code><code class="value">8442</code><code class="plain">, </code><code class="keyword">true</code><code class="plain">);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Document to sign</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">byte</code><code class="plain">[] unsigned = </code><code class="string">"&lt;document&gt;&lt;name&gt;Some content&lt;/name&gt;&lt;/document&gt;"</code><code class="plain">.getBytes();</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">byte</code><code class="plain">[] signed;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Signing</code></div>
<div class="line"><code class="plain">    GenericSignResponse signResp = signserver.sign(</code><code class="string">"DemoXMLSigner"</code><code class="plain">, unsigned);</code></div>
<div class="line"><code class="plain">    signed = signResp.getProcessedData();</code></div>
<div class="line"><code class="plain">    System.out.println(</code><code class="string">"Signed: "</code><code class="plain"> + </code><code class="keyword">new</code><code class="plain"> String(signed));</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Validating</code></div>
<div class="line"><code class="plain">    GenericValidationResponse validateResp = signserver.validate(</code><code class="string">"DemoXMLValidator"</code><code class="plain">, signed);</code></div>
<div class="line"><code class="plain">    System.out.println(</code><code class="string">"Valid: "</code><code class="plain"> + validateResp.isValid());</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain">(validateResp.getSignerCertificate() != </code><code class="keyword">null</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain">(validateResp.getSignerCertificate() </code><code class="keyword">instanceof</code><code class="plain"> X509Certificate) {</code></div>
<div class="line"><code class="plain">            X509Certificate signerCert = (X509Certificate) validateResp.getSignerCertificate();</code></div>
<div class="line"><code class="plain">            System.out.println(</code><code class="string">"Signed by: "</code><code class="plain"> + signerCert.getSubjectDN().getName());</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">} </code><code class="keyword">catch</code><code class="plain"> (Exception ex) {</code></div>
<div class="line"><code class="plain">    ex.printStackTrace();</code></div>
<div class="line"><code class="plain">}                       </code></div>
</div>
</div>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="Admin_WS_Interface.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>Admin WS Interface</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="Apache_HTTP_Server_as_Reverse_Proxy.html" class="post-navigation-link">
                        <span>Apache HTTP Server as Reverse Proxy</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#LegacyInterfaces-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>