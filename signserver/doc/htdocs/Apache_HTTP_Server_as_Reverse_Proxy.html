<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-10-09T09:35:59.265+0000">
        <meta name="exp-page-id" content="370999673">
        <meta name="exp-page-title" content="Apache HTTP Server as Reverse Proxy">
        <meta name="exp-page-version" content="1">
        <meta name="exp-page-scroll-page-id" content="3820c3ecc4f32b989874d24d773066b6">
        <meta name="exp-page-created" content="2019-09-19T13:04:53.000+0000">
        <meta name="exp-page-last-modified" content="2019-09-19T13:05:26.000+0000">
        <meta name="exp-page-labels" content="command">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="SSDOCS">
        <meta name="exp-space-title" content="SignServer Documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="371111034">
        <meta name="exp-document-title" content="SignServer Documentation">
        <meta name="exp-version-status" content="in-progress">
        <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
        <meta name="exp-version-name" content="Working version">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>Apache HTTP Server as Reverse Proxy</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="ApacheHTTPServerasReverseProxy-top" data-pageid="370999673" data-confluence-editor-version="v1" data-confluence-deployment-type="CLOUD">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="SignServer_Documentation.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/attachments/e415105eb31a/ssdocs)" alt="SignServer Documentation" title="SignServer Documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-fcf63af5524135ddc53b7e1fcb96600824ac74ab28481cdc5c6f8da59fbb81fa">
                    <a href="SignServer_Documentation.html">
                        SignServer Documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=370999673" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="SignServer_Documentation.html" rel="prev" target="_self">SignServer Documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Integration.html" rel="prev" target="_self">SignServer Integration</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        Apache HTTP Server as Reverse Proxy
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-a3f5130cffdf5690599de1c3b678f79cbaa2ef3b8b05bc8bd3bf4024d4c90274">
                            Apache HTTP Server as Reverse Proxy
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <p>This section contains examples of how the Apache Web Server (version 2.2.20) can be used as a proxy in front of SignServer. The guide is only informative, please consult the current Apache documentation for the modules used.</p><p>The proxy can for example be used to:</p><ul><li>Use standard ports (80, 443) instead of unprivileged ports used by the application server.</li><li>Make workers accessible through more nice looking URLs. For example, "<span class="nolink">http://tsa.example.com</span>" instead of "<span class="nolink">http://example.com:8080/signserver/tsa?workerName=TimeStampSigner1</span>".</li><li>Usie any of the access control and authentication mechanism available in Apache.</li><li>Redirect HTTP traffic to HTTPS.</li><li>Only accept requests to specified locations.</li></ul><p>Since the requests should go through the proxy, it is recommended to configure the application server to only listen to localhost, and/or use a firewall blocking the application server ports from external requests. To configure JBoss to only listen to localhost, set the following properties in <code>signserver_deploy.properties</code>:</p><div class="scroll-code scroll-highlighted-code-block" data-language="bash" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">httpsserver.bindaddress.pubhttp=127.0.0.1</code></div>
<div class="line"><code class="plain">httpsserver.bindaddress.pubhttps=127.0.0.1</code></div>
<div class="line"><code class="plain">httpsserver.bindaddress.privhttps=127.0.0.1</code></div>
</div>
</div><p>Install the Apache web server and enable required modules (the following commands are for Ubuntu but should be similar in other distributions as well):</p><div class="scroll-code scroll-highlighted-code-block" data-language="bash" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> apt-get </code><code class="functions">install</code><code class="plain"> apache2</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">cd</code><code class="plain"> </code><code class="plain">/etc/apache2/mods-enabled/</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/proxy</code><code class="plain">.load proxy.load</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/proxy_http</code><code class="plain">.load proxy_http.load</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/proxy_ajp</code><code class="plain">.load proxy_ajp.load</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/proxy_balancer</code><code class="plain">.load proxy_balancer.load</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/rewrite</code><code class="plain">.load rewrite.load</code></div>
<div class="line"><code class="plain">$ </code><code class="functions">sudo</code><code class="plain"> </code><code class="functions">ln</code><code class="plain"> -s ..</code><code class="plain">/mods-available/ssl</code><code class="plain">.load ssl.load</code></div>
</div>
</div><p><br clear="none"></p><div class="section"><h2 id="ApacheHTTPServerasReverseProxy-Example:RewriteURLsforTSA(usingmod_proxyandmod_rewrite)" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="2" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Example: Rewrite URLs for TSA (using mod_proxy and mod_rewrite)</h2><p>The following sample configuration allows rendering nice URLs for time-stamping so that you can point your TSA clients to <code>http://tsa.example.com/</code> instead of <code><span class="nolink">http://tsa.example.com:8080/signserver/process?workerName=TimeStampSigner1</span></code>.</p><p>This configuration combines <code>mod_proxy</code> with <code>mod_rewrite</code> to enable setting the workerName or workerId, allowing different TSAs available on different URLs.</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">&lt;VirtualHost tsa.example.com:</code><code class="value">80</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    ServerName tsa.example.com</code></div>
<div class="line"><code class="plain">    ServerAlias tsa.example.com</code></div>
<div class="line"><code class="plain">    CustomLog /var/log/apache2/access.log combined</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    RewriteEngine on</code></div>
<div class="line"><code class="plain">    RewriteLogLevel </code><code class="value">5</code></div>
<div class="line"><code class="plain">    RewriteLog "/var/log/apache2/rewrite.log</code></div>
<div class="line"><code class="plain">    RewriteRule ^/$ /?workerName=TimeStampSigner1 [PT]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    ProxyRequests Off</code></div>
<div class="line"><code class="plain">    &lt;Proxy *&gt;</code></div>
<div class="line"><code class="plain">        Order deny,allow</code></div>
<div class="line"><code class="plain">        Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Proxy&gt;</code></div>
<div class="line"><code class="plain">    ProxyPass / http:</code><code class="comments">//127.0.0.1:8080/signserver/process</code></div>
<div class="line"><code class="plain">    ProxyPassReverse / http:</code><code class="comments">//127.0.0.1:8080/signserver/process</code></div>
<div class="line"><code class="plain">&lt;/VirtualHost&gt;</code></div>
</div>
</div><h2 id="ApacheHTTPServerasReverseProxy-Example:RewriteURLsandredirecttoHTTPS(usingAJP)" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="2" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Example: Rewrite URLs and redirect to HTTPS (using AJP)</h2><p>The following example configures three virtual hosts.</p><p>The first <code>signserver.example.com:80</code> redirects all requests to use HTTPS and thus the virtual host <code>signserver.example.com:443</code>.</p><p>The second virtual host is configured to proxy requests to the <code>/signserver</code> path on the application server using the AJP protocol. It is also configured to use HTTPS with a server certificate.</p><p>The last virtual hosts <code>auth.signserver.example.com</code> using an additional IP address is configured to require client certificate authentication.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Some application servers (for example, JBoss 4) might have problems writing the correct port number in the endpoint URL in the web services WSDL file when using a proxy (that is, writing 8443 instead of 443).</p></div></div><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">&lt;VirtualHost signserver.example.com:</code><code class="value">80</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    ServerName signserver.example.com</code></div>
<div class="line"><code class="plain">    ServerAlias signserver.example.com</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    RewriteEngine On</code></div>
<div class="line"><code class="plain">    RewriteCond %{HTTPS} off</code></div>
<div class="line"><code class="plain">    RewriteRule (.*) https:</code><code class="comments">//%{HTTP_HOST}%{REQUEST_URI}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Configure log</code></div>
<div class="line"><code class="plain">    LogLevel warn</code></div>
<div class="line"><code class="plain">    ErrorLog /var/log/apache2/error.log</code></div>
<div class="line"><code class="plain">    CustomLog /var/log/apache2/access.log combined</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;/VirtualHost&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;VirtualHost signserver.example.com:</code><code class="value">443</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    ServerName signserver.example.com</code></div>
<div class="line"><code class="plain">    ServerAlias signserver.example.com</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    ProxyRequests Off</code></div>
<div class="line"><code class="plain">    &lt;Proxy balancer:</code><code class="comments">//mycluster-3&gt;</code></div>
<div class="line"><code class="plain">        BalancerMember ajp:</code><code class="comments">//localhost:8009/signserver</code></div>
<div class="line"><code class="plain">    &lt;/Proxy&gt;</code></div>
<div class="line"><code class="plain">    ProxyPass / balancer:</code><code class="comments">//mycluster-3/</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    RewriteEngine   On</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Treat requests to / and /signserver/ as the same </code><code class="keyword">for</code><code class="plain"> web services endpoints to work.</code></div>
<div class="line"><code class="plain">    RewriteCond     %{THE_REQUEST}  /signserver/</code></div>
<div class="line"><code class="plain">    RewriteRule     ^/signserver/(.*)$ /$</code><code class="value">1</code><code class="plain"> [PT]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Configure secure SSL </code><code class="keyword">for</code><code class="plain"> </code><code class="keyword">this</code><code class="plain"> server using SSL certificate generated by EJBCA</code></div>
<div class="line"><code class="plain">    SSLEngine on</code></div>
<div class="line"><code class="plain">    SSLCipherSuite HIGH</code></div>
<div class="line"><code class="plain">    SSLProtocol all -SSLv2</code></div>
<div class="line"><code class="plain">    SSLCertificateFile /home/markus/Documents/PrimeKey/MarkusCA/example.com/signserver.example.com-cert.pem</code></div>
<div class="line"><code class="plain">    SSLCertificateKeyFile /home/markus/Documents/PrimeKey/MarkusCA/example.com/signserver.example.com-key.pem</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Configure log</code></div>
<div class="line"><code class="plain">    LogLevel warn</code></div>
<div class="line"><code class="plain">    ErrorLog /var/log/apache2/error.log</code></div>
<div class="line"><code class="plain">    CustomLog /var/log/apache2/access.log combined</code></div>
<div class="line"><code class="plain">&lt;/VirtualHost&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain"># Note: auth.signserver.example.com must have a different IP address</code></div>
<div class="line"><code class="plain">&lt;VirtualHost auth.signserver.example.com:</code><code class="value">443</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    ServerName auth.signserver.example.com</code></div>
<div class="line"><code class="plain">    ServerAlias auth.signserver.example.com</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    ProxyRequests Off</code></div>
<div class="line"><code class="plain">    &lt;Proxy balancer:</code><code class="comments">//mycluster-4&gt;</code></div>
<div class="line"><code class="plain">        BalancerMember ajp:</code><code class="comments">//localhost:8009/signserver</code></div>
<div class="line"><code class="plain">    &lt;/Proxy&gt;</code></div>
<div class="line"><code class="plain">    ProxyPass / balancer:</code><code class="comments">//mycluster-4/</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    RewriteEngine   On</code></div>
<div class="line"><code class="plain">    # Treat requests to / and /signserver/ as the same </code><code class="keyword">for</code><code class="plain"> web services endpoints to work.</code></div>
<div class="line"><code class="plain">    RewriteCond     %{THE_REQUEST}  /signserver/</code></div>
<div class="line"><code class="plain">    RewriteRule     ^/signserver/(.*)$ /$</code><code class="value">1</code><code class="plain"> [PT]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Configure secure SSL </code><code class="keyword">for</code><code class="plain"> </code><code class="keyword">this</code><code class="plain"> server using SSL certificate generated by EJBCA</code></div>
<div class="line"><code class="plain">    SSLEngine on</code></div>
<div class="line"><code class="plain">    SSLCipherSuite HIGH</code></div>
<div class="line"><code class="plain">    SSLProtocol all -SSLv2</code></div>
<div class="line"><code class="plain">    SSLCertificateFile /home/markus/Documents/PrimeKey/MarkusCA/example.com/auth.signserver.example.com-cert.pem</code></div>
<div class="line"><code class="plain">    SSLCertificateKeyFile /home/markus/Documents/PrimeKey/MarkusCA/example.com/auth.signserver.example.com-key.pem</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    SSLVerifyClient require</code></div>
<div class="line"><code class="plain">    SSLVerifyDepth </code><code class="value">1</code></div>
<div class="line"><code class="plain">    SSLCACertificateFile /home/markus/Documents/PrimeKey/MarkusCA/example.com/truststore.pem</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Configure log</code></div>
<div class="line"><code class="plain">    LogLevel warn</code></div>
<div class="line"><code class="plain">    ErrorLog /var/log/apache2/error.log</code></div>
<div class="line"><code class="plain">    CustomLog /var/log/apache2/access.log combined</code></div>
<div class="line"><code class="plain">&lt;/VirtualHost&gt;</code></div>
</div>
</div><h2 id="ApacheHTTPServerasReverseProxy-Example:Grantingaccesstospecificworkersonly" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="2" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Example: Granting access to specific workers only</h2><p>This example shows how to limit access to specified resources only.</p><p>If you are going to grant different users access to different workers, always remember to first deny access from the root location since there are other ways to access a worker than the "/worker/*" or "/sodworker/*" pattern. For instance, /process, /tsa, /pdf and /sod etc, as well as using the web services interfaces /signserverws, /SignServerWSService, /validationws, /ValidationWSService, and /ClientWSService, all can be used to invoke&nbsp;<strong>any</strong>&nbsp;worker.</p><p>If you instead relay on SignServer to do the authentication/authorization, it is recommended to only grant access to the locations you intend to use. In that case you will probably want to also give access to the web services interfaces, /worker and /process etc.</p><p>Also remember that if you are proxying from multiple virtual hosts (for example, if you have one with and one without client authentication as in the example above), you might want to add the access restrictions to all of them.</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain"> ...</code></div>
<div class="line"><code class="plain">    # First, deny access globally and then only give access to resources explicitly</code></div>
<div class="line"><code class="plain">    &lt;Location /&gt;</code></div>
<div class="line"><code class="plain">        Order Deny,Allow</code></div>
<div class="line"><code class="plain">        Deny from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Allow index page</code></div>
<div class="line"><code class="plain">    &lt;LocationMatch </code><code class="string">"^/$"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/LocationMatch&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Allow Client Web</code></div>
<div class="line"><code class="plain">    &lt;Location /clientweb/&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Allow documentation</code></div>
<div class="line"><code class="plain">    &lt;Location /doc/&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Allow web page resources</code></div>
<div class="line"><code class="plain">    &lt;LocationMatch </code><code class="string">"\.(css|js|jpg|png)$"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/LocationMatch&gt;</code></div>
<div class="line"><code class="plain">    </code></div>
<div class="line"><code class="plain">    # Allow the Admin </code><code class="keyword">interface</code></div>
<div class="line"><code class="plain">    &lt;Location /AdminWSService/&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Grant everybody access to the XMLSigner</code></div>
<div class="line"><code class="plain">    &lt;Location /worker/XMLSigner&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">    Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line"><code class="plain">                        </code></div>
<div class="line"><code class="plain">    # Grant everybody access to the MRTDSODSigner</code></div>
<div class="line"><code class="plain">    &lt;Location /sodworker/MRTDSODSigner&gt;</code></div>
<div class="line"><code class="plain">        Order Allow,Deny</code></div>
<div class="line"><code class="plain">        Allow from all</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    # Grant valid users access to the CMSSigner</code></div>
<div class="line"><code class="plain">    &lt;Location /worker/CMSSigner&gt;</code></div>
<div class="line"><code class="plain">    Order Allow,Deny</code></div>
<div class="line"><code class="plain">        Allow from all</code></div>
<div class="line"><code class="plain">        AuthType Basic</code></div>
<div class="line"><code class="plain">        AuthName </code><code class="string">"Restricted CMSSigner access"</code></div>
<div class="line"><code class="plain">        AuthUserFile /home/markus/.htpasswd</code></div>
<div class="line"><code class="plain">        Require valid-user</code></div>
<div class="line"><code class="plain">    &lt;/Location&gt;</code></div>
<div class="line"><code class="plain">    ...</code></div>
</div>
</div><h2 id="ApacheHTTPServerasReverseProxy-AdditionalConfiguration" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="2" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Additional Configuration</h2><h3 id="ApacheHTTPServerasReverseProxy-CustomPrivateHTTPSport" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="4" data-scroll-relative-heading-rank="3" class="scroll-original-h4 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">Custom Private HTTPS port</h3><p>For example, if a reverse proxy is used to change the ports used by SignServer, the links in the Administration Web interface might not be correct (for example, if the standard port 443 is used instead of 8443). In that case, configure the following in conf/signserver_deploy.properties:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">httpserver.external.privhttps=</code><code class="value">443</code></div>
</div>
</div><h3 id="ApacheHTTPServerasReverseProxy-CustomContextRoot" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="4" data-scroll-relative-heading-rank="3" class="scroll-original-h4 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">Custom Context Root</h3><p>With a reverse proxy, it is also possible to use a different beginning of the URL for accessing SignServer than the default "/signserver". If for example the reverse proxy instead serves SignServer under "/myservice/signserver" this might have to be configured in <code>conf/signserver_deploy.properties</code> so that the URLs in the Administration Web interface, as well as the Web Services endpoints, work as expected:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">httpserver.context.root=/myservice/signserver</code></div>
</div>
</div><p><br clear="none"></p></div>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="Legacy_Interfaces.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>Legacy Interfaces</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="Stresstest_CLI.html" class="post-navigation-link">
                        <span>Stresstest CLI</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#ApacheHTTPServerasReverseProxy-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>