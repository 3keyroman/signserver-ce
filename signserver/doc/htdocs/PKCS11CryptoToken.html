<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-10-09T09:36:20.069+0000">
        <meta name="exp-page-id" content="371000127">
        <meta name="exp-page-title" content="PKCS11CryptoToken">
        <meta name="exp-page-version" content="2">
        <meta name="exp-page-scroll-page-id" content="b2904f457891655b211f015740c00d93">
        <meta name="exp-page-created" content="2023-02-13T10:03:36.000+0000">
        <meta name="exp-page-last-modified" content="2024-04-04T08:51:27.424+0000">
        <meta name="exp-page-labels" content="command,external-link,p11ng-signserver">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="SSDOCS">
        <meta name="exp-space-title" content="SignServer Documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="371111034">
        <meta name="exp-document-title" content="SignServer Documentation">
        <meta name="exp-version-status" content="in-progress">
        <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
        <meta name="exp-version-name" content="Working version">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>PKCS11CryptoToken</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="PKCS11CryptoToken-top" data-pageid="371000127" data-confluence-editor-version="v1" data-confluence-deployment-type="CLOUD">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="SignServer_Documentation.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/attachments/e415105eb31a/ssdocs)" alt="SignServer Documentation" title="SignServer Documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-362924e7eadae6131eac640b8028f1ee41045d8155111c0a9f5705290ebff7b1">
                    <a href="SignServer_Documentation.html">
                        SignServer Documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=371000127" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="SignServer_Documentation.html" rel="prev" target="_self">SignServer Documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Reference.html" rel="prev" target="_self">SignServer Reference</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Components.html" rel="prev" target="_self">SignServer Components</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="CryptoTokens.html" rel="prev" target="_self">CryptoTokens</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        PKCS11CryptoToken
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-1ce46153d4b5394721c786cb86c76ddc566627a5055442c406d7d2ef2fe255a5">
                            PKCS11CryptoToken
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <h2 id="PKCS11CryptoToken-Overview" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Overview</h2><style>[data-colorid=pxncw3u9oa]{color:#205081} html[data-color-mode=dark] [data-colorid=pxncw3u9oa]{color:#7eaedf}[data-colorid=ncnpe91ngt]{color:#205081} html[data-color-mode=dark] [data-colorid=ncnpe91ngt]{color:#7eaedf}</style><p>PKCS11 allows using an HSM that has a PKCS11 module, such as Utimaco, nCipher, SafeNet or AEP KeyPer.</p><p>SignServer uses the same underlying implementation of PKCS11 crypto tokens as EJBCA but since the token labels strings differ, it is important to use the properties listed in this section for SignServer. The EJBCA ClientToolbox tool can be used to generate and test&nbsp;PKCS11 keys to confirm that the keys can be used with SignServer. For more information, refer to&nbsp;the EJBCA documentation on&nbsp;<span data-linked-resource-id="372724832" data-linked-resource-version="1" data-linked-resource-type="page">EJBCA Client Toolbox</span> and <span data-linked-resource-id="372724998" data-linked-resource-version="1" data-linked-resource-type="page">Hardware Security Modules (HSM)</span>.</p><p>CRYPTOTOKEN_IMPLEMENTATION=<strong>org.signserver.server.cryptotokens.PKCS11CryptoToken</strong></p><h2 id="PKCS11CryptoToken-AvailableProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Available Properties</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><div class="tablesorter-header-inner">Property</div></th><th colspan="1" rowspan="1" class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>DEFAULTKEY</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The key alias of the private key to be used for testing that this crypto token is working.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> If this key does not exist, the crypto token/worker will show as OFFLINE even if it has been activated. This is typically the case when the crypto token has been set up for the first time and the key has not yet been generated. To resolve, generate a key with the key alias name.</p><p>A property with this name is typically also accepted by the worker using this crypto token and will then be the key to use for actual signing.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>NEXTCERTSIGNKEY</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>A property with this name is typically configured in the worker using this crypto token to hold the name of the next key to use.&nbsp; Certificate signing requests (CSR) can be made for this key while the current key (DEFAULTKEY) is still in production. After uploading the new certificate the value of NEXTCERTSIGNKEY can be moved to DEFAULTKEY. Optional.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>PIN</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Authentication code for activation. Only required for auth-activation, otherwise the activatecryptotoken CLI command can be used.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHAREDLIBRARYNAME</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Name of pre-defined PKCS11 library to be used. The available libraries can be configured in signserver_deploy.properties. If the legacy SHAREDLIBRARY property is also defined, it must point to the same library on the file system. Required, unless the old SHAREDLIBRARY is set.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHAREDLIBRARY&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)">&nbsp;This property is deprecated.</p><p>Full path to the library containing the PKCS11 interface. From version 3.7.0 this must point to a file declared in signserver_deploy.properties (or using the built-in values). If this property is defined at the same time as SHAREDLIBRARYNAME they must point to the same library on the file system.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SLOTLABELTYPE&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Indicates how the slot should be identified. Supported values are SLOT_NUMBER, SLOT_INDEX or SLOT_LABEL. Required.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SLOTLABELVALUE&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The slot to use, identified with the type specified in SLOTLABELTYPE:</p><ul><li>SLOT_NUMBER is the number (ID) of the slot</li><li>SLOT_INDEX is the zero-base index of the slot in the list of available slots as returned by the PKCS#11 provider</li><li>SLOT_LABEL this is the label of the slot</li></ul><p>Required but not allowed if the legacy properties SLOT or SLOTLISTINDEX are specified.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SLOT or SLOTLISTINDEX</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Legacy properties for indicating which slot to use. Only available for backwards compatibility. Instead use the SLOTLABELTYPE and SLOTLABELVALUE properties.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ATTRIBUTESFILE&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Path to file with PKCS#11 attributes used for key generation. Optional, not allowed if ATTRIBUTES is specified.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ATTRIBUTES&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>PKCS#11 attributes used for key generation specified directly in the property value. Optional, not allowed if ATTRIBUTESFILE is specified.</p><p>Sample p11attributes.cfg:</p><div class="scroll-code scroll-highlighted-code-block" data-language="xml" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">attributes(generate,CKO_PUBLIC_KEY,*) = {</code></div>
<div class="line"><code class="plain">CKA_TOKEN = false</code></div>
<div class="line"><code class="plain">CKA_ENCRYPT = true</code></div>
<div class="line"><code class="plain">CKA_VERIFY = true</code></div>
<div class="line"><code class="plain">CKA_WRAP = true</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">attributes(generate, CKO_PRIVATE_KEY,*) = {</code></div>
<div class="line"><code class="plain">CKA_TOKEN = true</code></div>
<div class="line"><code class="plain">CKA_PRIVATE = true</code></div>
<div class="line"><code class="plain">CKA_SENSITIVE = true</code></div>
<div class="line"><code class="plain">CKA_EXTRACTABLE = false</code></div>
<div class="line"><code class="plain">CKA_DECRYPT = true</code></div>
<div class="line"><code class="plain">CKA_SIGN = true</code></div>
<div class="line"><code class="plain">CKA_UNWRAP = true</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><p>&nbsp;<img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> <span>The PKCS#11 attributes configuration is global per shared library. If specified in multiple workers, only the configuration from the first worker loaded will be used. Changing the property might not take effect without restarting the application server.</span></p><p>&nbsp;<img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> <span>For a Thales nCipher 'module protected' slot (slot index 0), CKA_PRIVATE must be false for the CKO_PRIVATEKEY to allow the key to be used without a login. Otherwise the key generation will fail with a CKR_USER_NOT_LOGGED_IN PKCS#11 error.</span></p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>CACHE_PRIVATEKEY</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>If set to true, the private key and certificate is cached in the worker so that they are not queried for each signature. This could potentially improve performance in some environments, typically where network HSMs or HSM slots with many keys are used. Default: true.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> <span>This worker property is to be specified in the worker where the key to be used is specified by the DEFAULTKEY property. It is that key that will be cached locally in the worker. It is important to remember this if the crypto token is configured in a separate worker in which case this property should be specified in the worker that will be using the crypto token and not necessarily in the one having the crypto token configuration.</span></p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/9e960ec239e9/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)">&nbsp;<span>When enabled, the signer certificate is also cached if taken from the token and not overridden by specifying it in the configuration. This means that if the certificate in the token is changed, the old certificate will still be used until the worker is reloaded, clearing the cache.</span></p><p><span>This property is needed in the signer when using a <a href="OneTimeCryptoWorker.html" data-linked-resource-id="371000102" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="371000102" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000102/OneTimeCryptoWorker" data-scroll-link-target-source-id="371000102">OneTimeCryptoWorker</a>.</span></p></div></td></tr></tbody></table></div><h2 id="PKCS11CryptoToken-DefaultGlobalProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Default Global Properties<span data-colorid="pxncw3u9oa" class="cipe-edit-link-placeholder aui-icon aui-icon-small aui-iconfont-edit">&nbsp;</span></h2><p>Certain worker properties can instead be specified as default values in the global configuration, to avoid having to repeat the propertied in every worker. Individual workers can override the default global values (if any), by specifying the property as usual.</p><p>Global default values are specified as global values in the global configuration with the name prefixed with "DEFAULT.". The following properties can currently be specified in the global configuration:</p><ul><li>SHAREDLIBRARYNAME</li><li>SHAREDLIBRARY</li><li>SLOTLABELTYPE</li><li>SLOTLABELVALUE</li><li>SLOT</li><li>SLOTLISTINDEX</li><li>ATTRIBUTES</li><li>ATTRIBUTESFILE</li><li>PIN</li></ul><h3 id="PKCS11CryptoToken-ExampleUsage" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">Example Usage<span data-colorid="ncnpe91ngt" class="cipe-edit-link-placeholder aui-icon aui-icon-small aui-iconfont-edit">&nbsp;</span></h3><p>Edit (preferably a copy of) pkcs11-crypto.properties to match your PKCS#11 token.</p><p>Run the following command to set up the token:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver setproperties pkcs11-crypto-configuragtion.properties</code></div>
</div>
</div><p>Reload the configuration using the printed ID (in this example 8):</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver reload </code><code class="value">8</code></div>
</div>
</div><p>Activate the crypto token by specifying the PIN code:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver activatecryptotoken </code><code class="value">8</code></div>
</div>
</div><p>Unless your DEFAULTKEY worker property points to an existing key in the HSM, the activation will look like it failed. Continue by creating a key that can be used for testing slot activation:</p><p>Generate a keypair in the token to be used as test key:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver generatekey </code><code class="value">8</code><code class="plain"> -alias testkey1 -keyalg RSA -keyspec </code><code class="value">2048</code></div>
</div>
</div><p>Set the key as test key:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver setproperty </code><code class="value">8</code><code class="plain"> DEFAULTKEY testkey1</code></div>
<div class="line"><code class="plain">bin/signserver reload </code><code class="value">8</code></div>
<div class="line"><code class="plain">bin/signserver activatecryptotoken </code><code class="value">8</code></div>
</div>
</div><p>Test the keypair:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver testkey </code><code class="value">8</code></div>
</div>
</div><p>You also need a certificate for the signer. Generate a certificate request with the command:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver generatecertreq </code><code class="value">8</code><code class="plain"> </code><code class="string">"CN=PKCS11 Signer token"</code><code class="plain"> SHA1WithRSA /tmp/certreq.pem</code></div>
</div>
</div><p>Add a user in EJBCA with a certificate profile suitable for signing, and enroll for a "Server Certificate" using the public web pages.</p><p>Create the certificate chain file with the command:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">cat /tmp/cert.pem /tmp/AdminCA1.pem &gt; /tmp/certchain.pem</code></div>
</div>
</div><p>The signer certificate must be first, and the root CA certificate last.</p><p>The signer certificate should then be uploaded to the worker which should use it.</p><p>Upload the signing certificate chain to the signer using the command:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">bin/signserver uploadsignercertificatechain </code><code class="value">9</code><code class="plain"> GLOB /tmp/certchain.pem bin/signserver reload </code><code class="value">9</code></div>
</div>
</div><p>Specify a PKCS#11 attribute to override the statically configured attribute to use when generating a key.<br clear="none">Where x is the object class: PUBLIC or PRIVATE.<br clear="none">Where y is the key type: RSA, ECDSA, etc.<br clear="none">Where z is the attribute name or ID as decimal number or a hexadecimal number prefixed with "0x".</p><h2 id="PKCS11CryptoToken-KnownIssues" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Known Issues</h2><ul><li><strong>Certain Java versions are having issues with the RSASSA-PSS signature algorithm (SHAxWithRSAandMGF1).</strong> <br clear="none">Previously, the RSASSA-PSS signature algorithm (SHAxWithRSAandMGF1) was not supported with SunPKCS11 but later versions of Java 8 and 11 have added support for them. However, for Java versions before 11.0.7, the algorithm is only working with key sizes &gt;=4096 bits. For details, refer to the OpenJDK bug <a class="external-link scroll-external-link" href="https://bugs.openjdk.java.net/browse/JDK-8232950" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="https://bugs.openjdk.java.net/browse/JDK-8232950" data-scroll-link-local="false">JDK-8232950</a>.</li></ul>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="General_properties.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>General properties</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="Algorithm_Support.html" class="post-navigation-link">
                        <span>Algorithm Support</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#PKCS11CryptoToken-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>