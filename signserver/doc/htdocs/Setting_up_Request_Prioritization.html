<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-10-09T09:35:55.542+0000">
        <meta name="exp-page-id" content="370999543">
        <meta name="exp-page-title" content="Setting up Request Prioritization">
        <meta name="exp-page-version" content="2">
        <meta name="exp-page-scroll-page-id" content="a225d06abd0b78f5833d673bc6207913">
        <meta name="exp-page-created" content="2021-01-26T15:46:36.000+0000">
        <meta name="exp-page-last-modified" content="2024-04-02T16:30:40.881+0000">
        <meta name="exp-page-labels" content="">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="SSDOCS">
        <meta name="exp-space-title" content="SignServer Documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="371111034">
        <meta name="exp-document-title" content="SignServer Documentation">
        <meta name="exp-version-status" content="in-progress">
        <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
        <meta name="exp-version-name" content="Working version">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>Setting up Request Prioritization</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="SettingupRequestPrioritization-top" data-pageid="370999543" data-confluence-editor-version="v1" data-confluence-deployment-type="CLOUD">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="SignServer_Documentation.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/attachments/e415105eb31a/ssdocs)" alt="SignServer Documentation" title="SignServer Documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-571b5842f34a8091544fdf7ed2dd6edcaa6156e0185927728d2c26c5dbf1689d">
                    <a href="SignServer_Documentation.html">
                        SignServer Documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=370999543" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="SignServer_Documentation.html" rel="prev" target="_self">SignServer Documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Operations.html" rel="prev" target="_self">SignServer Operations</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        Setting up Request Prioritization
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-ea69300fea72b4f5c97bee970c30c362420a0f4a15e59efd59696403ba95669e">
                            Setting up Request Prioritization
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <p><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><span class="status-macro aui-lozenge aui-lozenge-complete">enterprise</span></span></span></p><p><span style="color: rgb(0,0,0);">In a SignServer system with multiple workers configured to serve different types of signing requests, Request Prioritization&nbsp;allows you to assign different priority levels to different signing requests. </span><span style="color: rgb(0,0,0);"><span>When the overall system load requires resources to be prioritized, SignServer system resources are used in a way that means high-priority requests are served with a faster response time than l</span>ow-priority requests.</span></p><p><span style="color: rgb(0,0,0);">Request Prioritization is enabled using a SignServer global configuration property and allows assigning the priority of each request based on the worker the request is targeted to.</span></p><p><span style="color: rgb(0,0,0);">The following sections describe how to configure request prioritization and set up the worker, followed by instructions for how to optionally test the feature using stress tests to collect response times.</span></p><p><span style="color: rgb(0,0,0);"></span></p><h2 id="SettingupRequestPrioritization-Step1-ConfigureGlobalProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><span style="color: rgb(0,0,0);">Step 1 - Configure Global Properties<br clear="none"></span></h2><p><span style="color: rgb(0,0,0);">To enable Request Prioritization on SignServer, set the global configuration property&nbsp;<strong>GLOB.QOS_FILTER_ENABLED</strong> to <strong>true</strong>. The feature is by default be disabled <strong>(false)</strong> in a newly installed or upgraded system.</span></p><p><span style="color: rgb(0,0,0);">When enabled, any worker that has not been specifically assigned a high-priority level will have the lowest priority level (0).&nbsp;</span></p><p><span style="color: rgb(0,0,0);">By specifying <a href="Worker_Status_Properties_Page.html" data-linked-resource-id="371000634" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="371000634" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000634/Worker+Status+Properties+Page" data-scroll-link-target-source-id="371000634">Worker ID</a>s in combination with priority levels (a higher value means higher priority) the listed workers are assigned higher priority as per the configuration of the parameter&nbsp;<strong>GLOB.QOS_PRIORITIES</strong>.</span></p><p><span style="color: rgb(0,0,0);">Priorities are specified as integers ranging from 0 to the maximum value (<strong>GLOB.QOS_MAX_PRIORITY</strong>), where a higher number means requests to the worker (when using the /worker servlet) gets a higher priority when requests are getting queued.</span></p><h3 style="text-decoration: none;" id="SettingupRequestPrioritization-GlobalProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3"><span style="color: rgb(0,0,0);">Global Properties</span></h3><p><span style="color: rgb(0,0,0);">The following table lists the global properties and provides a sample for setting priorities on selected workers.</span></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" style="text-align: left;" class="confluenceTh"><p><span style="color: rgb(0,0,0);">Property</span></p></th><th colspan="1" rowspan="1" style="text-align: left;" class="confluenceTh"><p><span style="color: rgb(0,0,0);">Description</span></p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">GLOB.QOS_FILTER_ENABLED</span></p></td><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Set to true to enable request prioritization in the filter. By default, the filter acts as a pass-through, with the standard behavior of treating all requests the same.</span></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">GLOB.QOS_PRIORITIES</span></p></td><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Comma-separated list of colon-separated Worker ID-priority pairs.</span></p><p><span style="color: rgb(0,0,0);">For example: <strong>1:1,2:2,4:5</strong> will assign the following priority levels (a higher value means higher priority):</span></p><ul><li><span style="color: rgb(0,0,0);">Priority level 1 to worker with Worker ID 1</span></li><li><span style="color: rgb(0,0,0);">Priority level 2 to worker with worker ID 2</span></li><li><span style="color: rgb(0,0,0);">Priority level 5 to worker with worker ID 4</span></li></ul><p><span style="color: rgb(0,0,0);">For more information on Worker IDs, see <a href="Worker_Status_Properties_Page.html" data-linked-resource-id="371000634" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="371000634" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000634/Worker+Status+Properties+Page" data-scroll-link-target-source-id="371000634">Worker Status Properties Page</a>.</span></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">GLOB.QOS_MAX_REQUESTS</span></p></td><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Maximum number of requests handled before starting to queue. Default 10. This might need to be adjusted when changing appserver thread pool settings.</span></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">GLOB.QOS_MAX_PRIORITY</span></p></td><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Maximum priority level. Default 5. Higher priority levels have higher priority. Priority level 0 is the default for workers not assigned a specific priority.</span></p></td></tr></tbody></table></div><p><br clear="none"></p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">To avoid excessive EJB lookups, the global configuration values are kept cached in the web filter for a default duration of 10 seconds. Thus, depending on timing, updating a global property might take a while before having an effect on assigned priority levels for requests.</span></p></div></div><h2 id="SettingupRequestPrioritization-Step2-AddQoSStatusWorker" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><span style="color: rgb(0,0,0);">Step 2 - Add QoS Status Worker</span></h2><p><span style="color: rgb(0,0,0);">Follow the steps below to add the&nbsp;<a href="QoS_Status_Worker.html" data-linked-resource-id="370999942" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999942" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999942/QoS+Status+Worker" data-scroll-link-target-source-id="370999942">QoS Status Worker</a>,&nbsp;providing the status of the prioritization web filter, using the sample configuration file&nbsp;qos-status-worker.properties as a template.</span></p><p><span style="color: rgb(0,0,0);">The QoS status worker has the fully qualified class name: <strong>org.signserver.server.signers.QoSStatusWorker</strong></span></p><ol><li><span style="color: rgb(0,0,0);">Select the SignServer AdminWeb <strong>Workers</strong> tab, and click <strong>Add</strong> to add a new worker.</span></li><li><span style="color: rgb(0,0,0);">Choose the method <strong>From Template</strong>.</span></li><li><span style="color: rgb(0,0,0);">Select&nbsp;<strong>qos-status-worker.properties</strong> in the <strong>Load from Template</strong> list and click <strong>Next</strong>.</span></li><li><span style="color: rgb(0,0,0);">Click <strong>Apply</strong> to load the configuration and list the worker in the <strong>All Workers</strong> list.</span></li><li><span style="color: rgb(0,0,0);">Select the added worker in the list to open the <strong>Worker</strong> page.</span></li><li><span style="color: rgb(0,0,0);">Check if the <strong>Worker status</strong> is Offline and if there are any errors listed. <br clear="none"></span></li></ol><p><span style="color: rgb(0,0,0);">For a list of all&nbsp;QoS Status Worker specific properties, see <a href="QoS_Status_Worker.html" data-linked-resource-id="370999942" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999942" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999942/QoS+Status+Worker" data-scroll-link-target-source-id="370999942">QoS Status Worker</a></span><span style="color: rgb(0,0,0);">.</span></p><h2 id="SettingupRequestPrioritization-TestRequestPrioritization" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><span style="color: rgb(0,0,0);">Test Request Prioritization</span></h2><p><span style="color: rgb(0,0,0);">To optionally test Request Prioritization you can set up a system using a specific type of Worker called SleepWorker, allowing the processing time of each request to be configured.</span></p><h3 id="SettingupRequestPrioritization-SetupSleepWorkersforTesting" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3"><span style="color: rgb(0,0,0);">Set up SleepWorkers for Testing</span></h3><p><span style="color: rgb(0,0,0);">Follow the steps below to set up two SleepWorkers with different priority levels, in the following examples named <strong>SleepWorkerHigh</strong> and <strong>SleepWorkerLow.</strong></span></p><ol><li><span style="color: rgb(0,0,0);">Select the SignServer AdminWeb <strong>Workers</strong> tab. </span><ul><li><span style="color: rgb(0,0,0);">Click <strong>Add</strong> to create a <strong>SleepWorkerHigh</strong> worker for sending requests with high priority.<br clear="none"></span></li><li><span style="color: rgb(0,0,0);">Choose the method <strong>By Properties</strong>.</span></li><li><span style="color: rgb(0,0,0);">S</span><span style="color: rgb(0,0,0);">pecify for example the following configuration properties:</span><ul><li><span style="color: rgb(0,0,0);"><strong>Name:</strong> Specify a name for the worker to be added, in this example, <strong>SleepWorkerHigh</strong>.</span></li><li><span style="color: rgb(0,0,0);"><strong>I</strong><strong>mplementation Class</strong>: Specify qualified class name of the implementation for the worker.</span></li><li><p><span style="color: rgb(0,0,0);"><strong>Additional Properties</strong>: Click <strong>Add</strong> to add any other properties to the worker, for example:</span></p><ul><li><p><span style="color: rgb(0,0,0);"><strong>AUTHTYPE=NOAUTH</strong> </span></p></li><li><p><strong><span style="color: rgb(0,0,0);">SLEEP_TIME=1000</span></strong></p></li><li><p><span style="color: rgb(0,0,0);">Click <strong>Add</strong> again to list the added properties. <br clear="none"></span></p></li></ul></li></ul></li><li><p><span style="color: rgb(0,0,0);">Click <strong>Next</strong> and then&nbsp;</span><span style="color: rgb(0,0,0);"><strong>Apply</strong> to load the configuration and list the worker in the <strong>All Workers</strong> list, displaying the name of the worker followed by its Wor</span>ker ID <span lang="en">in parentheses.</span></p></li><li><p><span style="color: rgb(0,0,0);">Ensure that your <strong>SleepWorkerHigh</strong> worker is assigned a high-priority level using the&nbsp;<strong>GLOB.QOS_PRIORITIES</strong> parameter as described in&nbsp;<a href="Setting_up_Request_Prioritization.html#SettingupRequestPrioritization-Step1-ConfigureGlobalProperties" data-scroll-target-source-id="370999543" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999543/Setting+up+Request+Prioritization#src-370999543_SettingupRequestPrioritization-Step1-ConfigureGlobalProperties" data-scroll-link-target-source-id="370999543">Step 1 - Configure Global Properties</a>. </span></p></li></ul></li><li><span style="color: rgb(0,0,0);">Next, select the SignServer AdminWeb <strong>Workers</strong> tab, and click <strong>Add</strong> to create a <strong>SleepWorkerLow</strong> worker for sending requests with low priority.<br clear="none"></span><ul><li><span style="color: rgb(0,0,0);">Choose the method <strong>By Properties</strong>.</span></li><li><span style="color: rgb(0,0,0);">S</span><span style="color: rgb(0,0,0);">pecify for example the following configuration properties</span><span style="color: rgb(0,0,0);">:</span><ul><li><span style="color: rgb(0,0,0);"><strong>Name:</strong> Specify a name for the worker to be added, in this example, <strong>SleepWorkerLow</strong>.</span></li><li><span style="color: rgb(0,0,0);"><strong>I</strong><strong>mplementation Class</strong>: Specify qualified class name of the implementation for the worker.</span></li><li><p><span style="color: rgb(0,0,0);"><strong>Additional Properties</strong>: Click <strong>Add</strong> to add any other properties to the worker, for example:</span></p><ul><li><p><span style="color: rgb(0,0,0);"><strong>AUTHTYPE=NOAUTH</strong> </span></p></li><li><p><strong><span style="color: rgb(0,0,0);">SLEEP_TIME=1000</span></strong></p></li><li><p><span style="color: rgb(0,0,0);">Click <strong>Add</strong> again to list the added properties. <br clear="none"></span></p></li></ul></li></ul></li><li><p><span style="color: rgb(0,0,0);">Click <strong>Next</strong> and then&nbsp;</span><span style="color: rgb(0,0,0);"><strong>Apply</strong> to load the configuration and list the worker in the <strong>All Workers</strong> list, displaying the name of the worker followed by its Worker ID <span lang="en">in parentheses.</span></span></p></li><li><p><span style="color: rgb(0,0,0);">Ensure that your <strong>SleepWorkerLow</strong> worker is assigned a low-priority level using the&nbsp;<strong>GLOB.QOS_PRIORITIES</strong> parameter as described in&nbsp;<a href="Setting_up_Request_Prioritization.html#SettingupRequestPrioritization-Step1-ConfigureGlobalProperties" data-scroll-target-source-id="370999543" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999543/Setting+up+Request+Prioritization#src-370999543_SettingupRequestPrioritization-Step1-ConfigureGlobalProperties" data-scroll-link-target-source-id="370999543">Step 1 - Configure Global Properties</a>. </span></p></li></ul></li></ol><p><span style="color: rgb(0,0,0);">With your two SleepWorkers (<strong>SleepWorkerHigh</strong> and <strong>SleepWorkerLow</strong>) set up with different priority levels, you can now run stress tests and send requests with both high and low priority.</span></p><h3 id="SettingupRequestPrioritization-RunStressTests" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3"><span style="color: rgb(0,0,0);">Run Stress Tests</span></h3><p><span style="color: rgb(0,0,0);">Run two&nbsp;parallel&nbsp;stress tests using <strong>SleepWorkerHigh</strong> and <strong>SleepWorkerLow</strong> and collect the response times. </span></p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">./bin/stresstest -data </code><code class="string">"foo"</code><code class="plain"> -threads </code><code class="value">5</code><code class="plain"> -testsuite DocumentSigner1 -worker SleepWorkerHigh -workerurl http:</code><code class="comments">//localhost:8080/signserver/worker -timelimit 60000</code></div>
</div>
</div><div class="content-wrapper"><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">./bin/stresstest -data </code><code class="string">"foo"</code><code class="plain"> -threads </code><code class="value">100</code><code class="plain"> -testsuite DocumentSigner1 -worker SleepWorkerLow -workerurl http:</code><code class="comments">//localhost:8080/signserver/worker -timelimit 60000</code></div>
</div>
</div><p><span style="color: rgb(0,0,0);">After 60 seconds time limit, the output from the stress tests should indicate a lower average response time for requests targeting SleepWorkerHigh than for SleepWorkerLow.&nbsp;</span></p><p><span style="color: rgb(0,0,0);">The following provides an example of the output.</span></p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>Operations performed: 248
Minimum response time: 1028 ms
Average response time: 1172.1 ms
Maximum response time: 1520 ms
Run time: 61399 ms
Transactions per second: 4.0 tps</pre>
</div></div><p><span style="color: rgb(0,0,0);">Next, while running the performance test, check the queue stats change over time in SignServer AdminWeb.</span></p><ol><li><span style="color: rgb(0,0,0);">Select the SignServer AdminWeb <strong>Workers</strong> tab, select the&nbsp;<strong>QoSStatusWorker</strong> in the list to open the <strong>Worker</strong> page.</span></li><li><span style="color: rgb(0,0,0);">View the status summary and reload the page to check&nbsp;queue stats change over time.</span></li></ol><p><span style="color: rgb(0,0,0);">The following provides an example of the Admin Web output.</span></p></div><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>Status of Worker with ID 15 (QoSStatusWorker) is: 
Filter enabled : true 
Maximum requests : 1 
Maximum priority level: 5 
Queue size(0) : 0 
Queue size(1) : 0 
Queue size(2) : 0 
Queue size(3) : 0 
Queue size(4) : 0 
Queue size(5) : 0</pre>
</div></div><p><span style="color: rgb(0,0,0);">While running the performance tests, you can also verify from the command line by running the following command.</span></p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">./bin/signclient signdocument -workername QoSStatusWorker -data </code><code class="string">""</code></div>
</div>
</div><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">The following provides an example of the ACLI output.</span></p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>FILTER_ENABLED=true
MAX_REQUESTS=10
MAX_PRIORITY_LEVEL=5
QUEUE_SIZE(0)=0
QUEUE_SIZE(1)=0
QUEUE_SIZE(2)=0
QUEUE_SIZE(3)=0
QUEUE_SIZE(4)=0
QUEUE_SIZE(5)=0</pre>
</div></div>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="Setting_up_OpenPGP_Signer.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>Setting up OpenPGP Signer</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="Troubleshooting.html" class="post-navigation-link">
                        <span>Troubleshooting</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#SettingupRequestPrioritization-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>