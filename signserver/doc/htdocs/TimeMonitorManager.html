<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-10-09T09:36:17.795+0000">
        <meta name="exp-page-id" content="371000086">
        <meta name="exp-page-title" content="TimeMonitorManager">
        <meta name="exp-page-version" content="2">
        <meta name="exp-page-scroll-page-id" content="adadbc939465588638d9a932be88130a">
        <meta name="exp-page-created" content="2022-11-14T16:23:58.000+0000">
        <meta name="exp-page-last-modified" content="2024-03-05T09:23:12.342+0000">
        <meta name="exp-page-labels" content="signserveree">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="SSDOCS">
        <meta name="exp-space-title" content="SignServer Documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="371111034">
        <meta name="exp-document-title" content="SignServer Documentation">
        <meta name="exp-version-status" content="in-progress">
        <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
        <meta name="exp-version-name" content="Working version">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>TimeMonitorManager</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="TimeMonitorManager-top" data-pageid="371000086" data-confluence-editor-version="v1" data-confluence-deployment-type="CLOUD">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="SignServer_Documentation.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/attachments/e415105eb31a/ssdocs)" alt="SignServer Documentation" title="SignServer Documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-5e5c8238b61571b69dc83b54ab6c48c7a891f981113fb1f861e4a109125df5d5">
                    <a href="SignServer_Documentation.html">
                        SignServer Documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=371000086" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="SignServer_Documentation.html" rel="prev" target="_self">SignServer Documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Reference.html" rel="prev" target="_self">SignServer Reference</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="SignServer_Workers.html" rel="prev" target="_self">SignServer Workers</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="Other_Workers.html" rel="prev" target="_self">Other Workers</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        TimeMonitorManager
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-17480caf11c7ba8c211cb5591beaf8facc0138be7456270ec3853c6d02f596cd">
                            TimeMonitorManager
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <p><span class="status-macro aui-lozenge aui-lozenge-complete">enterprise</span></p><p><br clear="none">Fully qualified class name: <strong>org.signserver.module.timemonitormanager.TimeMonitorManager</strong>.</p><h2 id="TimeMonitorManager-Overview" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Overview</h2><p>Similar to the StatusPropertiesWorker, the TimeMonitorManager also supports setting status properties in the status repository. Additionally, the TimeMonitorManager supports dynamic configuration of the TimeMonitor and also gives a complete view of the state of the TimeMonitor.</p><h2 id="TimeMonitorManager-WorkerProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Worker Properties</h2><p>All worker properties starting with either "TIMEMONITOR." or "TIMESERVER." are sent to the TimeMonitor if it asks for it. For information on available properties, see <a href="TimeMonitor_Configuration.html" data-linked-resource-id="371000477" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="371000477" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000477/TimeMonitor+Configuration" data-scroll-link-target-source-id="371000477">TimeMonitor Configuration</a>.</p><h2 id="TimeMonitorManager-RequestProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Request Properties</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.VALUE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Where x is a status property: Sets the value of the property</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.EXPIRATION</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Where x is a status property: Sets the expiration time for x (x.VALUE must also be specified)</p></td></tr></tbody></table></div><h2 id="TimeMonitorManager-ResponseProperties" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Response Properties</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.UPDATE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The time when the property was written&nbsp;</p></td></tr></tbody></table></div><h2 id="TimeMonitorManager-Statusoutput" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2">Status output</h2><p>Detailed information about the state of the TimeMonitor is available in the getstatus output of the TimeMonitorManager:</p><ul><li>Time monitor: Indicates if the application is detected to be 'Running', 'Disabled', 'Not running?' or 'Unavailabe'. The state is determined by if the manager has seen an update from the TimeMonitor before the status properties are starting to expire.</li><li>Last update: The last time the TimeMonitor contacted the manager.</li><li>Current time: Current time of the server.</li><li>Time state: The last time state from the TimeMonitor.</li><li>Report state: The last report state from the TimeMonitor.</li><li>Leap state: The last leap state from the TimeMonitor.</li><li>Configuration: Either 'out of sync' or 'up to date' depending on if the current configuration has been read by the TimeMonitor or not. After changing a property in the TimeMonitorManager it is normal that the configuration is marked as 'out of sync' until the TimeMonitor fetches it.</li><li>Status properties values: Prints the current value and possibly the expiration time for the TIMESOURCE0_INSYNC and LEAPSECOND status properties.</li><li>Timings: Prints the current time values from the TimeMonitor.</li><li>Configuration: Prints the configuration values in the manager (not necessarily read by the TimeMonitor yet).</li><li>Last TimeMonitor log entries: Prints the last log entries obtained from the last update from the TimeMonitor.</li></ul><h3 id="TimeMonitorManager-Sampleoutput" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3">Sample output</h3><p>The following displays an example status output:</p><div class="scroll-code scroll-highlighted-code-block" data-language="xml" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">Status of Worker with ID 300 (TimeMonitorManager) is:</code></div>
<div class="line"><code class="plain"> Worker status : Active</code></div>
<div class="line"><code class="plain"> Time monitor : Running</code></div>
<div class="line"><code class="plain"> Last update : 2017-08-26 11:43:39,176</code></div>
<div class="line"><code class="plain"> Current time : 2017-08-26 11:43:39,580</code></div>
<div class="line"><code class="plain"> Time state : INSYNC</code></div>
<div class="line"><code class="plain"> Report state : REPORTED</code></div>
<div class="line"><code class="plain"> Leap state : NONE</code></div>
<div class="line"><code class="plain"> Configuration : Up to date</code></div>
<div class="line"><code class="plain">Status Repository values:</code></div>
<div class="line"><code class="plain"> TIMESOURCE0_INSYNC: true</code></div>
<div class="line"><code class="plain"> LEAPSECOND: NONE</code></div>
<div class="line"><code class="plain">Timings:</code></div>
<div class="line"><code class="plain"> NTP server time offset: 0 ms</code></div>
<div class="line"><code class="plain"> NTP server query time: 507 ms</code></div>
<div class="line"><code class="plain"> NTP leap status query time: 8 ms</code></div>
<div class="line"><code class="plain"> Report time: 7 ms</code></div>
<div class="line"><code class="plain"> Total required run time: 522 ms</code></div>
<div class="line"><code class="plain">Configuration:</code></div>
<div class="line"><code class="plain"> NTP server hosts: 192.168.30.25</code></div>
<div class="line"><code class="plain"> NTP query samples: 2</code></div>
<div class="line"><code class="plain"> NTP query timeout: 200 ms</code></div>
<div class="line"><code class="plain"> Max accepted offset: 997 ms</code></div>
<div class="line"><code class="plain"> Warn offset: 500 ms</code></div>
<div class="line"><code class="plain"> Status expire time: 900 ms</code></div>
<div class="line"><code class="plain"> Leap status expire time: 60000 ms</code></div>
<div class="line"><code class="plain"> Warn run time: 800 ms</code></div>
<div class="line"><code class="plain"> Minimum run time: 550 ms</code></div>
<div class="line"><code class="plain">Last TimeMonitor log entries:</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:29,253 INFO Started</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:29,287 INFO State changed to: UNKNOWN,REPORTED,UNKNOWN</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,255 INFO Config changed to: 1ccdf46b</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,782 INFO Time back in calibration: offset abs(0) max accepted offset 997</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,793 INFO State changed to: INSYNC,REPORTED,NONE</code></div>
</div>
</div>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="StatusPropertiesWorker.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>StatusPropertiesWorker</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="TimeMonitorStatusReportWorker.html" class="post-navigation-link">
                        <span>TimeMonitorStatusReportWorker</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#TimeMonitorManager-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>