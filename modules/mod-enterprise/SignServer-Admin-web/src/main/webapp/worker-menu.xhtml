<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:remove>
    <!--
    /*************************************************************************
    *                                                                       *
    *  SignServer: The OpenSource Automated Signing Server                  *
    *                                                                       *
    *  This software is free software; you can redistribute it and/or       *
    *  modify it under the terms of the GNU Lesser General Public           *
    *  License as published by the Free Software Foundation; either         *
    *  version 2.1 of the License, or any later version.                    *
    *                                                                       *
    *  See terms of license at gnu.org.                                     *
    *                                                                       *
    *************************************************************************/

    Version: $Id$
    -->
    </ui:remove>

    <f:metadata>
        <f:viewParam name="id" value="#{workerBean.id}"/>
    </f:metadata>

    <h1><h:graphicImage library="images" name="#{workerBean.worker.imageName}" title="#{workerBean.worker.imageAlt}" class="workerImage1"/> <h:outputText value="#{workerBean.worker.name}"/></h1>

    <div id="worker-menu">
        <ul>
            <li>
                <h:link outcome="worker" class="#{workerActiveMenu == 'worker' ? 'active' : ''}"><f:param name="id" value="#{workerBean.id}"/>Status Summary</h:link>
            </li>
            <li>
                <h:link outcome="worker-status-properties" class="#{workerActiveMenu == 'worker-status-properties' ? 'active' : ''}"><f:param name="id" value="#{workerBean.id}"/>Status Properties</h:link>
            </li>
            <li>
                <h:link outcome="worker-configuration" class="#{workerActiveMenu == 'worker-configuration' ? 'active' : ''}"><f:param name="id" value="#{workerBean.id}"/>Configuration</h:link>
                </li>
            <li>
                <h:link outcome="worker-authorization" class="#{workerActiveMenu == 'worker-authorization' ? 'active' : ''}"><f:param name="id" value="#{workerBean.id}"/>Authorization</h:link>
            </li>
            <li>
                <h:link outcome="worker-cryptotoken" class="#{workerActiveMenu == 'worker-cryptotoken' ? 'active' : ''}"><f:param name="id" value="#{workerBean.id}"/>CryptoToken</h:link>
            </li>
        </ul>
    </div>

    <div id="worker-actions">
        <!-- Note: This buttons are somewhat duplicated in workers.xhtml -->
        <h:form id="workerMenuOld">
            <p>
                <h:panelGroup rendered="#{workerActiveMenu == 'worker' or workerActiveMenu == 'worker-status-properties'}">
                    <h:commandButton class="buttonNeutral" value="Activate..." action="#{workerBean.bulkAction('workers-activation')}"/> <h:commandButton class="buttonNeutral" value="Deactivate..." action="#{workerBean.bulkAction('workers-deactivation')}"/> &nbsp; 
                    <h:commandButton class="buttonNeutral" value="Renew key..." action="#{workerBean.bulkAction('workers-renewkey')}"/> <h:commandButton class="buttonNeutral" value="Test key..." action="#{workerBean.bulkAction('workers-testkey')}"/> <h:commandButton class="buttonNeutral" value="Generate CSR..." action="#{workerBean.bulkAction('workers-csr')}"/> <h:commandButton class="buttonNeutral" value="Install certificates..." action="#{workerBean.bulkAction('workers-certificates')}"/> &nbsp;
                    <h:commandButton class="buttonNeutral" value="Renew signer..." action="#{workerBean.bulkAction('workers-renew')}"/> &nbsp;
                    <h:commandButton class="buttonNeutral" value="Destroy key..." action="#{workerBean.workerAction('worker-removekey')}"/> &nbsp; 
                    <h:commandButton class="buttonNeutral" value="Remove..." action="#{workerBean.bulkAction('workers-remove')}"/> &nbsp;
                    <h:commandButton class="buttonNeutral" value="Reload from database..." action="#{workerBean.bulkAction('workers-reload')}"/> 
                    <h:commandButton class="buttonNeutral" value="Export..." action="#{workerBean.bulkAction('workers-export')}"/>
                </h:panelGroup>
                
                <h:panelGroup rendered="#{workerActiveMenu == 'worker-configuration'}">
                    <h:commandButton class="buttonNeutral" value="Reload from database..." action="#{workerBean.bulkAction('workers-reload')}"/> 
                    <h:commandButton class="buttonNeutral" value="Export..." action="#{workerBean.bulkAction('workers-export')}"/>
                </h:panelGroup>
                
            </p>
        </h:form>
    </div>    
    
</ui:composition>
